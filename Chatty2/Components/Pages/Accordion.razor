@page "/accordion"

<div class="accordion-container">
    <span style="padding-left:10px;">Accordion</span>


    <section class="accordion">

        <div class="accordion__header">
            <span class="accordion__icon-wrapper" @onclick="ToggleAccordion1">
                @(IsExpanded1 ? "-" : "+")
            </span>
            <span class="accordion__title-text">Condition 1:</span>
            <InputText @bind-Value="ConditionTitle1" class="accordion__title-input" />
        </div>

        @if (IsExpanded1)
        {
            <div class="accordion__content">
                <label style="">Parameter:</label>
                <InputSelect id="parameter" @bind-Value="ConditionOneParam" style="margin-right:15px; width:120px" class="">
                    <option value="" disabled>Select...</option>
                    <option value="Option 1">Option 1</option>
                    <option value="Option 1">Option 1</option>
                    <option value="Option 2">Option 2</option>
                    <option value="Option 3">Option 3</option>
                </InputSelect>
                <label style="">Operator:</label>
                <InputSelect id="operator" @bind-Value="ConditionOneOperator" style="margin-right:15px; width:60px" class="">
                    <option value="" disabled>Select...</option>
                    <option value="="> =</option>
                    <option value=">="> &gt;=</option>
                    <option value="<"> &lt;</option>
                    <option value="<="> &lt;=</option>
                    <option value="!="> !=</option>
                </InputSelect>
                <InputNumber TValue="int" @bind-Value="ConditionOneValue" min="0" max="100" style="margin-right:15px; width:45px; height:22px"></InputNumber>
            </div>
        }
    </section>


    <section class="accordion">

        <div class="accordion__header">
            <span class="accordion__icon-wrapper" @onclick="ToggleAccordion2">
                @(IsExpanded2 ? "-" : "+")
            </span>
            <span class="accordion__title-text">Condition 2:</span>
            <InputText @bind-Value="ConditionTitle2" class="accordion__title-input" />
        </div>

        @if (IsExpanded2)
        {
            <div class="accordion__content">
                Content for accordion section 2
            </div>
        }
    </section>


    <section class="accordion">

        <div class="accordion__header">
            <span class="accordion__icon-wrapper" @onclick="ToggleAccordion3">
                @(IsExpanded3 ? "-" : "+")
            </span>
            <span class="accordion__title-text">Condition 3:</span>
            <InputText @bind-Value="ConditionTitle3" class="accordion__title-input" />
        </div>

        @if (IsExpanded3)
        {
            <div class="accordion__content">
                Content for accordion section 3
            </div>
        }
    </section>


</div>



@code {
    // 1. New property to track the state of the first accordion item
    public bool IsExpanded1 { get; set; } = false;
    public bool IsExpanded2 { get; set; } = false;
    public bool IsExpanded3 { get; set; } = false;


    // 2. Property to hold the value of the input box
    public string ConditionTitle1 { get; set; } = "A bus present on n/b approach...";
    public string ConditionOneParam { get; set; } = "";
    public string ConditionOneOperator { get; set; } = "";
    public int ConditionOneValue { get; set; } = 0;

    public string ConditionTitle2 { get; set; } = "A bus present on s/b approach...";
    public string ConditionTwoParam { get; set; } = "";
    public string ConditionTwoOperator { get; set; } = "";
    public int ConditionTwoValue { get; set; } = 0;

    public string ConditionTitle3 { get; set; } = "A bus present on w/b approach...";
    public string ConditionThreeParam { get; set; } = "";
    public string ConditionThreeOperator { get; set; } = "";
    public int ConditionThreeValue { get; set; } = 0;


    // 3. Method to toggle the state when the header is clicked
    private void ToggleAccordion1()
    {
        IsExpanded1 = !IsExpanded1;
    }
    private void ToggleAccordion2()
    {
        IsExpanded2 = !IsExpanded2;
    }
    private void ToggleAccordion3()
    {
        IsExpanded3 = !IsExpanded3;
    }

    protected override async Task OnInitializedAsync()
    {
    }
}

<style>
    .accordion-container {
        height: 100%;
        border: 1px solid red;
        border-radius: 5px;
        /* display: flex; */
        /* flex-direction: column; */
        margin-top: 10px;
        margin-bottom: 10px;
        padding: 10px;
        overflow-y: auto;
    }

    .accordion {
        border: 1px solid green;
        border-radius: 5px;
        overflow: hidden; /* ensures clean edge border radius*/
        min-height: 3em;
    }

    .accordion__header {
        display: flex;
        align-items: center;
        padding: 5px;
        background: #e8e8e8;
        min-height: 3em;
    }

    .accordion__icon-wrapper {
        display: inline-flex;
        justify-content: center;
        align-items: center;
        width: 1.5em;
        height: 1.5em;
        border: 1px solid #777;
        border-radius: 4px;
        margin-right: 10px;
        font-size: 1.2em;
        line-height: 1.2em; /* Line height should match height for vertical centering */
        font-weight: bold;
        cursor: pointer;
        flex-shrink: 0; /* Ensures the icon doesn't shrink when space is tight */
    }

        .accordion__icon-wrapper:hover {
            font-weight: 900;
        }

    .accordion__title-text {
        padding-right: 10px;
    }

    .accordion__title-input {
        flex: 1 1 auto; /* allow grow and shrink */
        padding: 5px 8px;
        border: 1px solid #ccc;
        border-radius: 4px;
        font-size: 1em;
        cursor: text;
    }

    /* Collapsible Content (Visible State) */
    .accordion__content {
        padding: 15px;
        border: 1px solid #e8e8e8;
        border-top: 0;
        background: #fff;
    }

        /* Last child padding fix */
        .accordion__content p:last-child {
            margin-bottom: 0;
        }
</style>